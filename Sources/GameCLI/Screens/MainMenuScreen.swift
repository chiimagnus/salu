import Foundation
import GameCore

/// ä¸»èœå•ç•Œé¢
enum MainMenuScreen {
    
    static func show(historyService: HistoryService) {
        Terminal.clear()
        
        // è·å–ç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤º
        let stats = historyService.getStatistics()
        let statsLine: String
        if stats.totalBattles > 0 {
            statsLine = "ğŸ“ˆ \(stats.wins)èƒœ \(stats.losses)è´Ÿ (èƒœç‡ \(String(format: "%.1f", stats.winRate))%)"
        } else {
            statsLine = "ğŸ“ˆ æš‚æ— æˆ˜ç»©"
        }
        
        print("""
        \(Terminal.bold)\(Terminal.cyan)
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        â•‘                                                       â•‘
        â•‘      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—                â•‘
        â•‘      â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘                â•‘
        â•‘      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘                â•‘
        â•‘      â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘                â•‘
        â•‘      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•                â•‘
        â•‘      â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•                 â•‘
        â•‘                                                       â•‘
        â•‘              âš”ï¸  æ€æˆ®å°–å¡” CLI ç‰ˆ  âš”ï¸                   â•‘
        â•‘                                                       â•‘
        â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
        â•‘                                                       â•‘
        â•‘  \(Terminal.reset)\(Terminal.green)[1]\(Terminal.cyan) ğŸ—ºï¸  å¼€å§‹å†’é™©                                  â•‘
        â•‘  \(Terminal.reset)\(Terminal.dim)[2]\(Terminal.cyan) âš™ï¸  è®¾ç½® / æˆ˜ç»©                              â•‘
        â•‘  \(Terminal.reset)\(Terminal.red)[3]\(Terminal.cyan) ğŸšª é€€å‡ºæ¸¸æˆ                                â•‘
        â•‘                                                       â•‘
        â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
        â•‘  \(Terminal.reset)\(Terminal.dim)\(statsLine)\(Terminal.bold)\(Terminal.cyan)\(String(repeating: " ", count: max(0, 40 - statsLine.count)))â•‘
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        \(Terminal.reset)
        """)
        
        print("\(Terminal.yellow)è¯·é€‰æ‹© > \(Terminal.reset)", terminator: "")
    }
}

